{% extends 'base.html' %}
{% block title %}{{ _('Trim Video') }}{% endblock %}
{% block content %}
  <h3>{{ _('Trim Video') }} <var>{{ item.id }}</var></h3>
  <div class="uk-margin">
    <video src="{{ url_for('serve_media', filename=item.video) }}" class="video" controls></video>
  </div>
  <form method="POST" class="video-trim" up-layer="root">
    <div class="uk-margin double-slider">
      <div class="slider-track"></div>
      <input name="range-start" class="uk-range-" type="range" min="0" step="0.000001" value="0" />
      <input name="range-end" class="uk-range-" type="range" min="0" step="0.000001" />
    </div>
    <div class="uk-margin">
      <button name="backward" class="uk-icon-button" uk-icon="chevron-double-left" title="Backward" type="button"></button>
      &nbsp;
      <input name="start" class="uk-input uk-form-width-small" type="number" min="0" step="0.000001" placeholder="{{ _('Start') }}" value="0" />
      â€”
      <input name="end" class="uk-input uk-form-width-small" type="number" min="0" step="0.000001" placeholder="{{ _('End') }}" />
      &nbsp; <button name="forward" class="uk-icon-button" uk-icon="chevron-double-right" title="Forward" type="button"></button>
      &nbsp; <button name="set-end" class="uk-icon-button" uk-icon="check" title="{{ _('Set End') }}" type="button"></button>
    </div>
    <div class="uk-margin uk-grid-small" uk-grid>
      <div class="uk-width-auto back">
        <a class="uk-button uk-button-default" href="{{ url_for('view_item', iid=item.id) }}">{{ _('Back') }}</a>
      </div>
      {% if can_overwrite %}
        <div class="uk-width-auto">
          <button name="action" value="save" class="uk-button uk-button-secondary uk-width-1-1" type="submit">{{ _('Overwrite') }} <var>{{ item.id }}</var></button>
        </div>
      {% endif %}
      <div class="uk-width-auto">
        <button name="action" value="copy" class="uk-button uk-button-primary uk-width-1-1" type="submit">{{ _('Save as New') }}</button>
      </div>
    </div>
  </form>
  <style>
    /* https://codepen.io/alexpg96/pen/xxrBgbP */
    .double-slider {
      position: relative;
      width: 100%;
      height: 32px;
    }
    .double-slider .slider-track {
      width: 100%;
      height: 4px;
      position: absolute;
      margin: auto;
      top: 0;
      bottom: 0;
      border-radius: 4px;
    }
    .double-slider input[type="range"] {
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      width: 100%;
      outline: none;
      position: absolute;
      margin: auto;
      top: 0;
      bottom: 0;
      background-color: transparent;
      pointer-events: none;
    }
    .double-slider input[type="range"]::-webkit-slider-runnable-track {
      -webkit-appearance: none;
      height: 4px;
    }
    .double-slider input[type="range"]::-moz-range-track {
      -moz-appearance: none;
      height: 4px;
    }
    .double-slider input[type="range"]::-ms-track {
      appearance: none;
      height: 4px;
    }
    .double-slider input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      height: 1.7em;
      width: 1.7em;
      background-color: #3264fe;
      cursor: pointer;
      margin-top: -9px;
      pointer-events: auto;
      border-radius: 50%;
    }
    .double-slider input[type="range"]::-moz-range-thumb {
      -webkit-appearance: none;
      height: 1.7em;
      width: 1.7em;
      cursor: pointer;
      border-radius: 50%;
      background-color: #3264fe;
      pointer-events: auto;
      border: none;
    }
    .double-slider input[type="range"]::-ms-thumb {
      appearance: none;
      height: 1.7em;
      width: 1.7em;
      cursor: pointer;
      border-radius: 50%;
      background-color: #3264fe;
      pointer-events: auto;
    }
    .double-slider input[type="range"]:active::-webkit-slider-thumb {
      background-color: #ffffff;
      border: 1px solid #3264fe;
    }
  </style>
{% endblock %}